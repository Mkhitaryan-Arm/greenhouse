<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenHouse.am - ’ä’°’ø’æ’•÷Ä’∂’•÷Ä’´ ’Ä’°’¥’°’Ø’°÷Ä’£</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }
        body { background: #f0f2f5; min-height: 100vh; padding-bottom: 120px; }
        
        .navbar {
            background: white; padding: 15px 5%; display: flex;
            justify-content: space-between; align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000;
        }
        .logo { color: #764ba2; font-size: 24px; font-weight: bold; }

        .container { padding: 30px 5%; }
        .section-title { margin-bottom: 25px; color: #333; font-size: 24px; border-left: 5px solid #764ba2; padding-left: 15px; }

        /* Flower Grid */
        .flowers-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px; }
        .flower-card { background: white; border-radius: 15px; overflow: hidden; cursor: pointer; transition: 0.3s; border: 1px solid #eee; text-align: center; }
        .flower-card:hover { transform: translateY(-8px); box-shadow: 0 12px 25px rgba(0,0,0,0.15); }
        .flower-img { width: 100%; height: 200px; object-fit: cover; }
        .flower-info { padding: 15px; }

        /* Greenhouse Grid */
        .gh-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .gh-card { background: white; border-radius: 12px; padding: 20px; border-top: 5px solid #ccc; position: relative; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .gh-card.available { border-top-color: #28a745; }

        /* Cart Floating Bar */
        .cart-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 15px 5%; box-shadow: 0 -4px 15px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; z-index: 1500; }
        .cart-total-box { cursor: pointer; background: #f8f9fa; padding: 10px 20px; border-radius: 10px; border: 1px solid #ddd; }
        .cart-total-box:hover { background: #eee; }

        /* Social Buttons */
        .social-btns { display: flex; gap: 8px; }
        .s-btn { padding: 10px 15px; border-radius: 8px; color: white; border: none; cursor: pointer; font-weight: bold; font-size: 14px; transition: 0.2s; }
        .btn-tg { background: #0088cc; }
        .btn-wa { background: #25d366; }
        .btn-vb { background: #7360f2; }
        .s-btn:hover { opacity: 0.8; transform: scale(1.05); }

        /* Cart Modal */
        .cart-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2500; align-items: center; justify-content: center; }
        .cart-content { background: white; width: 95%; max-width: 500px; border-radius: 20px; padding: 25px; max-height: 80vh; overflow-y: auto; position: relative; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #eee; }
        .qty-controls { display: flex; align-items: center; gap: 10px; }
        .qty-btn { width: 30px; height: 30px; border-radius: 50%; border: 1px solid #ddd; cursor: pointer; font-weight: bold; }

        /* General Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2000; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-content { background: white; padding: 30px; width: 90%; max-width: 450px; border-radius: 20px; text-align: center; }
        .type-btn { width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #ddd; border-radius: 10px; cursor: pointer; font-weight: bold; }
        
        .admin-box { display: none; margin-top: 15px; border-top: 1px dashed #eee; padding-top: 10px; }
        body.admin-mode .admin-box { display: block; }
        .btn { padding: 10px 20px; border-radius: 8px; cursor: pointer; border: none; font-weight: bold; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div class="navbar">
        <div class="logo">üå∏ GreenHouse.am</div>
        <div>
            <button class="btn" style="background:#ff9f43; color:white; margin-right: 10px;" onclick="toggleAdmin()">üîí ‘±’§’¥’´’∂</button>
            <button class="btn" style="background:#764ba2; color:white" onclick="logout()">‘µ’¨÷Ñ</button>
        </div>
    </div>

    <div class="container" id="flowerSection">
        <h2 class="section-title">’Ñ’•÷Ä ‘æ’°’≤’´’Ø’∂’•÷Ä’®</h2>
        <div class="flowers-grid" id="flowersGrid"></div>
    </div>

    <div class="container hidden" id="ghSection">
        <button class="btn" onclick="showFlowers()" style="background:#ddd; margin-bottom:20px;">‚Üê ’Ä’•’ø</button>
        <h2 id="ghTitle" class="section-title"></h2>
        <div class="gh-grid" id="ghGrid"></div>
    </div>

    <div class="cart-bar" id="cartBar">
        <div class="cart-total-box" onclick="openCart()">
            <strong>üõí ‘∂’°’¥’¢’µ’∏÷Ç’≤: <span id="totalPriceDisplay">0</span> ÷è</strong>
        </div>
        <div class="social-btns">
            <button class="s-btn btn-tg" onclick="checkout('tg')">Telegram</button>
            <button class="s-btn btn-wa" onclick="checkout('wa')">WhatsApp</button>
        </div>
    </div>

    <div class="cart-modal" id="cartModal">
        <div class="cart-content">
            <h2 style="margin-bottom: 15px;">’Å’•÷Ä ’ä’°’ø’æ’•÷Ä’®</h2>
            <div id="cartItemsList"></div>
            <div style="margin-top: 20px; text-align: right; font-size: 18px;">
                ‘∏’∂’§’∞’°’∂’∏÷Ç÷Ä’ù <strong><span id="modalTotal">0</span> ÷è</strong>
            </div>
            <button class="btn" onclick="closeCart()" style="width: 100%; margin-top: 15px; background: #764ba2; color: white;">’ì’°’Ø’•’¨</button>
        </div>
    </div>

    <div id="typeModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle"></h2>
            <div id="typesList" style="margin-top: 20px;"></div>
            <button onclick="closeModal()" style="margin-top: 15px; color: red; border: none; background: none; cursor: pointer; font-weight: bold;">’â’•’≤’°÷Ä’Ø’•’¨</button>
        </div>
    </div>

    <script>
        // --- ’è’é’Ö‘±‘º’Ü‘µ’ê ---
        const flowers = [
            { id: 1, name: '’é’°÷Ä’§', img: 'https://upload.wikimedia.org/wikipedia/commons/0/01/%D5%8E%D5%A1%D6%80%D5%A4%D5%A1%D5%A3%D5%B8%D6%82%D5%B5%D5%B6_%D5%BE%D5%A1%D6%80%D5%A4_2.jpg', types: ['‘ø’°÷Ä’¥’´÷Ä', '’ç’∫’´’ø’°’Ø', '‘≤’∏’º’§’∏'] },
            { id: 2, name: '‘ø’°’Ø’°’π', img: 'https://www.plantarium.ru/dat/plants/5/553/570553_9dceb5f4.jpg', types: ['‘¥’•’≤’´’∂', '‘ø’°÷Ä’¥’´÷Ä', '’Ñ’°’∂’∏÷Ç’∑’°’Ø’°’£’∏÷Ç’µ’∂'] },
            { id: 3, name: '’ï÷Ä’≠’´’§’•’°', img: 'https://kolibricompany.nl/wp-content/uploads/2022/04/PRINT-OKPlantnieuwecollectie2023-515-bolzano-colourful-optimism-optimized.jpg', types: ['’ç’∫’´’ø’°’Ø', '’é’°÷Ä’§’°’£’∏÷Ç’µ’∂'] },
            { id: 4, name: '‘≥’´’∫’Ω’∏÷Ü’´’¨’°', img: 'https://www.gardenia.net/wp-content/uploads/2023/05/baby-breath-how-to-grow-and-care-780x520.webp', types: ['’ç’∫’´’ø’°’Ø', '‘µ÷Ä’Ø’∂’°’£’∏÷Ç’µ’∂'] },
            { id: 5, name: '‘º’´’¨’´’°', img: 'https://hayfermer.am/uploads/posts/2017-05/1494075160_ed2e16fccd0341c97e6d848d6c17a1b2.jpg', types: ['‘±÷Ä÷Ñ’°’µ’°’Ø’°’∂', '’é’°’£÷Ä’°’µ’´’∂'] },
            { id: 6, name: '’ä’´’∏’∂', img: 'https://www.gardendesign.com/pictures/images/900x705Max/site_3/pink-hawaiian-coral-herbaceous-peony-garden-design_11834.jpg', types: ['‘≤’°÷Å ’æ’°÷Ä’§’°’£’∏÷Ç’µ’∂', '’Ñ’∏÷Ç’£ ’æ’°÷Ä’§’°’£’∏÷Ç’µ’∂'] },
            { id: 7, name: '‘≥’•÷Ä’¢’•÷Ä’°', img: 'https://s.list.am/f/406/92276406.webp', types: ['’Ü’°÷Ä’∂’ª’°’£’∏÷Ç’µ’∂', '‘¥’•’≤’´’∂'] },
            { id: 8, name: '’Ñ’•’≠’°’Ø', img: 'https://servicememorial.com/wp-content/uploads/2025/07/913kpwCnm8L._AC_SL1500_-300x300.jpg', types: ['‘ø’°÷Ä’¥’´÷Ä', '’ç’∫’´’ø’°’Ø'] },
            { id: 13, name: '’î÷Ä’´’¶’°’∂’©’•’¥', img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRGd_PlJYQgtGs6W5RIOZeHfAJX3HEE4dNPcg&s', types: ['’ç’∫’´’ø’°’Ø', '‘¥’•’≤’´’∂'] },
            { id: 14, name: '’á’∏÷Ç’∑’°’∂', img: 'https://168.am/wp-content/uploads/2021/08/shushan.jpg', types: ['’ç’∫’´’ø’°’Ø'] },
            { id: 17, name: '‘±’∂’¥’∏’º’∏÷Ç’Ø', img: 'https://168.am/wp-content/uploads/2015/09/anmoruk1.jpg', types: ['‘ø’°’∫’∏÷Ç’µ’ø'] },
            { id: 18, name: '’Ü’°÷Ä’£’´’¶', img: 'https://hayfermer.am/uploads/posts/2017-07/1499609269_narciss-2.jpg', types: ['‘¥’•’≤’´’∂'] }
        ];

        const greenhouses = Array.from({ length: 80 }, (_, i) => ({
            id: i + 1, name: `’ã’•÷Ä’¥’∏÷Å #${i + 1}`, region: ["‘±÷Ä’°÷Ä’°’ø", "‘±÷Ä’¥’°’æ’´÷Ä", "‘ø’∏’ø’°’µ÷Ñ", "‘µ÷Ä÷á’°’∂", "‘º’∏’º’´"][i % 5]
        }));

        let inventory = JSON.parse(localStorage.getItem('gh_inventory_final')) || {};
        let cart = [];
        let selF = "", selT = "", isAdmin = false;

        // --- ’ñ’à’í’Ü‘ø’ë‘ª‘±’Ü‘µ’ê ---
        function renderFlowers() {
            const grid = document.getElementById('flowersGrid');
            grid.innerHTML = flowers.map(f => `
                <div class="flower-card" onclick="openModal('${f.name}')">
                    <img src="${f.img}" class="flower-img">
                    <div class="flower-info"><h3>${f.name}</h3><p>${f.types.length} ’ø’•’Ω’°’Ø</p></div>
                </div>
            `).join('');
        }

        function openModal(name) {
            selF = name;
            const f = flowers.find(fl => fl.name === name);
            document.getElementById('modalTitle').innerText = name;
            document.getElementById('typesList').innerHTML = f.types.map(t => `<button class="type-btn" onclick="selectType('${t}')">${t} ${name}</button>`).join('');
            document.getElementById('typeModal').style.display = 'flex';
        }

        function selectType(t) {
            selT = t; closeModal();
            document.getElementById('flowerSection').classList.add('hidden');
            document.getElementById('ghSection').classList.remove('hidden');
            document.getElementById('ghTitle').innerText = `${selT} ${selF}`;
            renderGH();
        }

        function renderGH() {
            const grid = document.getElementById('ghGrid');
            grid.innerHTML = greenhouses.map(gh => {
                const key = `${gh.id}_${selT}_${selF}`;
                const data = inventory[key] || { p: 0, q: 0 };
                return `
                    <div class="gh-card ${data.q > 0 ? 'available' : ''}">
                        <strong>${gh.name}</strong> <small>üìç ${gh.region}</small>
                        <p style="margin-top:10px">‘≥’´’∂: ${data.p} ÷è | ‘±’º’Ø’°: ${data.q}</p>
                        ${data.q > 0 ? `<button class="btn" style="background:#28a745; color:white; width:100%; margin-top:10px" onclick="addToCart(${gh.id}, '${gh.name}', ${data.p})">üõí ‘±’æ’•’¨’°÷Å’∂’•’¨</button>` : '<p style="color:red; margin-top:10px">’â’Ø’°</p>'}
                        <div class="admin-box">
                            <input type="number" id="ap_${gh.id}" placeholder="‘≥’´’∂" value="${data.p}" style="width:45%">
                            <input type="number" id="aq_${gh.id}" placeholder="’î’°’∂’°’Ø" value="${data.q}" style="width:45%">
                            <button onclick="saveAdminData(${gh.id})" style="width:100%; background:#764ba2; color:white; border:none; padding:5px; margin-top:5px; border-radius:5px">’ä’°’∞’∫’°’∂’•’¨</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // --- ‘∂‘±’Ñ‘≤’Ö’à’í’Ç‘ª ’è’ê‘±’Ñ‘±‘≤‘±’Ü’à’í‘π’Ö’à’í’Ü ---
        function addToCart(ghId, ghName, price) {
            const itemKey = `${ghId}_${selT}_${selF}`;
            const existing = cart.find(i => i.key === itemKey);
            
            if (existing) {
                existing.qty++;
            } else {
                cart.push({ key: itemKey, ghName, price, flower: selF, type: selT, qty: 1 });
            }
            updateCartUI();
            alert("‘±’æ’•’¨’°÷Å’æ’•÷Å ’¶’°’¥’¢’µ’∏÷Ç’≤");
        }

        function updateCartUI() {
            const total = cart.reduce((sum, i) => sum + (i.price * i.qty), 0);
            document.getElementById('totalPriceDisplay').innerText = total;
            document.getElementById('modalTotal').innerText = total;
        }

function renderCartItems() {
    const list = document.getElementById('cartItemsList');
    if (cart.length === 0) {
        list.innerHTML = "<p style='text-align:center; padding:20px;'>‘∂’°’¥’¢’µ’∏÷Ç’≤’® ’§’°’ø’°÷Ä’Ø ’ß:</p>";
        return;
    }
    list.innerHTML = cart.map((item, index) => `
        <div class="cart-item" style="flex-direction: column; align-items: flex-start; gap: 10px;">
            <div style="width: 100%; display: flex; justify-content: space-between;">
                <strong>${item.type} ${item.flower} (${item.ghName})</strong>
                <button onclick="removeFromCart(${index})" style="border:none; color:red; background:none; cursor:pointer;">üóëÔ∏è</button>
            </div>
            
            <div style="display: flex; align-items: center; gap: 10px; width: 100%;">
                <div class="qty-controls" style="background: #f1f1f1; padding: 5px; border-radius: 10px;">
                    <button class="qty-btn" onclick="updateQty(${index}, -1)">-</button>
                    <input type="number" value="${item.qty}" 
                           onchange="updateQtyManual(${index}, this.value)" 
                           style="width: 60px; text-align: center; border: 1px solid #ccc; border-radius: 5px; padding: 3px; font-weight: bold;">
                    <button class="qty-btn" onclick="updateQty(${index}, 1)">+</button>
                </div>
                
                <div style="display: flex; gap: 5px;">
                    <button class="btn" style="padding: 5px 8px; font-size: 12px; background: #eee;" onclick="updateQtyManual(${index}, 10)">+10</button>
                    <button class="btn" style="padding: 5px 8px; font-size: 12px; background: #eee;" onclick="updateQtyManual(${index}, 25)">+25</button>
                    <button class="btn" style="padding: 5px 8px; font-size: 12px; background: #eee;" onclick="updateQtyManual(${index}, 50)">+50</button>
                </div>
            </div>
            <div style="font-size: 14px; color: #666;">‘≥’´’∂’®: ${item.price} ÷è | ‘≥’∏÷Ç’¥’°÷Ä’®: ${item.qty * item.price} ÷è</div>
        </div>
    `).join('');
}

// ’Ü’∏÷Ä ÷Ü’∏÷Ç’∂’Ø÷Å’´’°’ù ’±’•’º÷Ñ’∏’æ ’©’´’æ’® ’£÷Ä’•’¨’∏÷Ç ’∞’°’¥’°÷Ä
function updateQtyManual(index, value) {
    let newQty = parseInt(value);
    if (isNaN(newQty) || newQty < 1) {
        newQty = 1;
    }
    cart[index].qty = newQty;
    updateCartUI();
    renderCartItems();
}
        function updateQty(index, change) {
            cart[index].qty += change;
            if (cart[index].qty < 1) cart.splice(index, 1);
            updateCartUI();
            renderCartItems();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
            renderCartItems();
        }

        function openCart() {
            document.getElementById('cartModal').style.display = 'flex';
            renderCartItems();
        }

        function closeCart() {
            document.getElementById('cartModal').style.display = 'none';
        }

        function checkout(platform) {
            if (cart.length === 0) return alert("‘∂’°’¥’¢’µ’∏÷Ç’≤’® ’§’°’ø’°÷Ä’Ø ’ß:");
            
            let text = "üå∏ *’Ü’∏÷Ä ’ä’°’ø’æ’•÷Ä GreenHouse.am*%0A%0A";
            cart.forEach(i => {
                text += `‚ñ™Ô∏è ${i.type} ${i.flower} (${i.ghName})%0A   ${i.qty} ’∞’°’ø x ${i.price} ÷è = ${i.qty * i.price} ÷è%0A`;
            });
            text += `%0Aüí∞ *‘∏’∂’§’∞’°’∂’∏÷Ç÷Ä’ù ${document.getElementById('totalPriceDisplay').innerText} ÷è*`;

            if (platform === 'tg') window.open(`https://t.me/share/url?url=${text}`);
            if (platform === 'wa') window.open(`https://wa.me/?text=${text}`);
            if (platform === 'vb') window.open(`viber://forward?text=${text}`);
        }

        // --- ‘±‘¥’Ñ‘ª’Ü ‘µ’é ’ï‘∫‘±’Ü‘¥‘±‘ø ---
        function saveAdminData(id) {
            const p = document.getElementById(`ap_${id}`).value;
            const q = document.getElementById(`aq_${id}`).value;
            inventory[`${id}_${selT}_${selF}`] = { p: parseInt(p), q: parseInt(q) };
            localStorage.setItem('gh_inventory_final', JSON.stringify(inventory));
            renderGH();
        }

        function toggleAdmin() {
            if (!isAdmin && prompt("‘±’§’¥’´’∂ ‘≥’°’≤’ø’∂’°’¢’°’º:") === "admin.greenhouse.123") {
                isAdmin = true;
                document.body.classList.add('admin-mode');
            } else {
                isAdmin = false;
                document.body.classList.remove('admin-mode');
            }
        }

        function showFlowers() {
            document.getElementById('flowerSection').classList.remove('hidden');
            document.getElementById('ghSection').classList.add('hidden');
        }

        function closeModal() { document.getElementById('typeModal').style.display = 'none'; }
        function logout() { localStorage.removeItem('loggedIn'); window.location.href = 'index.html'; }

        // ’Ñ’•’Ø’∂’°÷Ä’Ø
        renderFlowers();

        
    </script>
</body>
</html>

